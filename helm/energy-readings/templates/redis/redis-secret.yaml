{{- if .Values.keda.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-keda-redis
  labels:
    {{- include "energy-readings.labels" . | nindent 4 }}
    app.kubernetes.io/component: processing-service
type: Opaque
stringData:
  # FQDN so KEDA operator (in keda namespace) can resolve Redis in this release's namespace
  address: "{{ .Release.Name }}-redis.{{ .Release.Namespace }}.svc.cluster.local:{{ .Values.redis.port }}"
{{- end }}